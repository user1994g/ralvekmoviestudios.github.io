<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Not Done Yet - A Gothic Tale</title>
    <link rel="icon" href="photos/ralvek.png" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.min.js"></script>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=MedievalSharp&family=Cinzel+Decorative:wght@400;700;900&family=UnifrakturMaguntia&display=swap');

      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
      }

      body {
          background-color: #000;
          color: #8a0303;
          font-family: 'MedievalSharp', cursive;
          overflow-x: hidden;
          line-height: 1.6;
      }

      /* THREE.JS CONTAINER */
      #three-container {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          z-index: -1;
      }

      /* NAVIGATION */
      .nav-bar {
          position: fixed;
          top: 30px;
          left: 30px;
          z-index: 1000;
      }

      .home-btn {
          background: rgba(10, 0, 0, 0.7);
          border: 1px solid #5a0000;
          color: #a8a8a8;
          padding: 12px 30px;
          border-radius: 0;
          font-size: 1.1em;
          letter-spacing: 3px;
          cursor: pointer;
          transition: all 0.4s ease;
          text-decoration: none;
          font-family: 'Cinzel Decorative', cursive;
          text-transform: uppercase;
          box-shadow: 0 0 15px rgba(150, 0, 0, 0.4);
          text-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
      }

      .home-btn:hover {
          background: #2a0000;
          box-shadow: 0 0 25px rgba(200, 0, 0, 0.7);
          color: #e8e8e8;
          transform: translateY(-2px);
      }

      /* HERO SECTION */
      .hero-section {
          position: relative;
          width: 100%;
          height: 100vh;
          overflow: hidden;
      }

      .hero-image {
          width: 100%;
          height: 100%;
          object-fit: cover;
          filter: grayscale(100%) brightness(0.15) contrast(1.4) sepia(0.3) hue-rotate(320deg);
      }

      .hero-overlay {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: radial-gradient(
              ellipse at center,
              rgba(20, 0, 0, 0.3) 0%,
              rgba(0, 0, 0, 0.95) 80%
          );
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          text-align: center;
          z-index: 10;
      }

      .hero-title {
          font-size: 7em;
          color: #8a0303;
          letter-spacing: 20px;
          font-weight: 900;
          text-shadow: 0 0 30px rgba(139, 0, 0, 0.8), 0 0 60px rgba(139, 0, 0, 0.5);
          animation: pulse 5s infinite alternate;
          font-family: 'UnifrakturMaguntia', cursive;
          margin-bottom: 30px;
          position: relative;
      }

      .hero-title::after {
          content: "";
          position: absolute;
          bottom: -20px;
          left: 50%;
          transform: translateX(-50%);
          width: 300px;
          height: 2px;
          background: linear-gradient(90deg, transparent, #8a0303, transparent);
      }

      .hero-subtitle {
          font-size: 1.8em;
          color: #a8a8a8;
          font-weight: 300;
          letter-spacing: 8px;
          font-style: italic;
          text-shadow: 0 0 15px rgba(139, 0, 0, 0.7);
          margin-top: 60px;
          animation: fadeInOut 8s infinite;
      }

      @keyframes pulse {
          0% { text-shadow: 0 0 30px rgba(139, 0, 0, 0.8), 0 0 60px rgba(139, 0, 0, 0.5); }
          50% { text-shadow: 0 0 40px rgba(139, 0, 0, 1), 0 0 80px rgba(139, 0, 0, 0.8), 0 0 100px rgba(139, 0, 0, 0.5); }
          100% { text-shadow: 0 0 30px rgba(139, 0, 0, 0.8), 0 0 60px rgba(139, 0, 0, 0.5); }
      }

      @keyframes fadeInOut {
          0%, 100% { opacity: 0.4; }
          50% { opacity: 1; }
      }

      /* TAPES SECTION */
      .tapes-section {
          background: rgba(5, 0, 0, 0.7);
          padding: 150px 20px;
          text-align: center;
          position: relative;
          backdrop-filter: blur(5px);
          border-top: 1px solid #3a0000;
          border-bottom: 1px solid #3a0000;
      }

      .tapes-title {
          font-size: 3em;
          font-weight: 700;
          color: #8a0303;
          margin-bottom: 80px;
          letter-spacing: 10px;
          font-family: 'Cinzel Decorative', cursive;
          text-shadow: 0 0 20px rgba(139, 0, 0, 0.7);
          position: relative;
      }

      .tapes-title::after {
          content: "";
          position: absolute;
          bottom: -20px;
          left: 50%;
          transform: translateX(-50%);
          width: 150px;
          height: 1px;
          background: #5a0000;
      }

      .tapes-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 40px;
          max-width: 1200px;
          margin: 0 auto;
      }

      .tape {
          background: rgba(20, 0, 0, 0.8);
          border: 1px solid #5a0000;
          border-radius: 0;
          padding: 50px 20px;
          transition: all 0.5s ease;
          cursor: pointer;
          position: relative;
          overflow: hidden;
          box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7), 0 0 20px rgba(90, 0, 0, 0.3);
      }

      .tape::before {
          content: "";
          position: absolute;
          top: 0;
          left: -100%;
          width: 100%;
          height: 100%;
          background: linear-gradient(90deg, transparent, rgba(139, 0, 0, 0.3), transparent);
          transition: left 0.8s ease;
      }

      .tape:hover {
          background: rgba(40, 0, 0, 0.9);
          transform: translateY(-10px) scale(1.05);
          box-shadow: 0 15px 40px rgba(0, 0, 0, 0.8), 0 0 30px rgba(139, 0, 0, 0.5);
          border-color: #8a0303;
      }

      .tape:hover::before {
          left: 100%;
      }

      .tape h3 {
          color: #d8d8d8;
          font-weight: 400;
          font-size: 1.6em;
          letter-spacing: 4px;
          font-family: 'Cinzel Decorative', cursive;
          position: relative;
          z-index: 1;
          text-shadow: 0 0 10px rgba(139, 0, 0, 0.5);
      }

      /* POPUP VIDEO */
      .popup {
          display: none;
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.95);
          align-items: center;
          justify-content: center;
          z-index: 9999;
      }

      .popup video {
          width: 80%;
          max-width: 900px;
          border-radius: 5px;
          border: 2px solid #5a0000;
          box-shadow: 0 0 50px rgba(139, 0, 0, 0.7);
      }

      .popup.active {
          display: flex;
          animation: fadeIn 0.7s ease;
      }

      /* SAD TEXT SECTION */
      .story {
          background: rgba(5, 0, 0, 0.8);
          padding: 150px 20px;
          text-align: center;
          line-height: 2;
          font-size: 1.4em;
          color: #a8a8a8;
          max-width: 1000px;
          margin: 0 auto;
          position: relative;
          font-style: italic;
          backdrop-filter: blur(3px);
      }

      .story::before, .story::after {
          content: """"";
          font-size: 5em;
          color: #5a0000;
          position: absolute;
          opacity: 0.3;
          text-shadow: 0 0 15px rgba(139, 0, 0, 0.5);
      }

      .story::before {
          top: 40px;
          left: 40px;
      }

      .story::after {
          bottom: 40px;
          right: 40px;
          transform: rotate(180deg);
      }

      .story p {
          margin-bottom: 60px;
          opacity: 0.9;
          text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7);
          position: relative;
          padding: 0 40px;
      }

      /* AUDIO CONTROLS */
      .audio-controls {
          position: fixed;
          bottom: 30px;
          right: 30px;
          background: rgba(10, 0, 0, 0.8);
          border: 1px solid #5a0000;
          border-radius: 0;
          padding: 15px 25px;
          display: flex;
          align-items: center;
          gap: 15px;
          z-index: 1000;
          box-shadow: 0 0 30px rgba(0, 0, 0, 0.7);
          font-family: 'Cinzel Decorative', cursive;
          backdrop-filter: blur(5px);
      }

      .audio-controls input[type="range"] {
          width: 120px;
          accent-color: #8a0303;
      }

      .audio-controls button {
          background: #2a0000;
          border: 1px solid #5a0000;
          color: #c8c8c8;
          padding: 8px 16px;
          border-radius: 0;
          cursor: pointer;
          font-size: 1em;
          transition: background 0.3s ease;
          letter-spacing: 2px;
      }

      .audio-controls button:hover {
          background: #4a0000;
          box-shadow: 0 0 15px rgba(139, 0, 0, 0.5);
      }

      /* GOTHIC BORDERS */
      .gothic-border {
          position: fixed;
          pointer-events: none;
          z-index: 100;
      }

      .border-top, .border-bottom {
          width: 100%;
          height: 30px;
          background: linear-gradient(90deg, transparent, #3a0000, transparent);
          box-shadow: 0 0 20px rgba(139, 0, 0, 0.3);
      }

      .border-top {
          top: 0;
      }

      .border-bottom {
          bottom: 0;
      }

      .border-left, .border-right {
          height: 100%;
          width: 30px;
          background: linear-gradient(180deg, transparent, #3a0000, transparent);
          box-shadow: 0 0 20px rgba(139, 0, 0, 0.3);
      }

      .border-left {
          left: 0;
      }

      .border-right {
          right: 0;
      }

      /* CANDLE FLICKER EFFECT */
      .candle {
          position: fixed;
          bottom: 100px;
          left: 40px;
          width: 25px;
          height: 50px;
          background: #1a1a1a;
          border-radius: 10px 10px 0 0;
          z-index: 50;
          box-shadow: 0 0 20px rgba(150, 0, 0, 0.5);
      }

      .candle::before {
          content: "";
          position: absolute;
          top: -20px;
          left: 50%;
          transform: translateX(-50%);
          width: 12px;
          height: 20px;
          background: #ff4500;
          border-radius: 50% 50% 20% 20%;
          animation: flicker 2s infinite alternate;
          box-shadow: 0 0 30px #ff4500, 0 0 60px #ff4500;
      }

      @keyframes flicker {
          0%, 100% { opacity: 0.7; transform: translateX(-50%) scaleY(1) skewX(0deg); }
          25% { opacity: 1; transform: translateX(-50%) scaleY(1.1) skewX(2deg); }
          50% { opacity: 0.6; transform: translateX(-50%) scaleY(0.9) skewX(-2deg); }
          75% { opacity: 0.9; transform: translateX(-50%) scaleY(1.05) skewX(1deg); }
      }

      /* FLOATING SPIRITS */
      .spirit {
          position: fixed;
          width: 100px;
          height: 150px;
          background: rgba(139, 0, 0, 0.1);
          border-radius: 50%;
          filter: blur(20px);
          animation: float 15s infinite linear;
          z-index: 5;
          opacity: 0.3;
      }

      @keyframes float {
          0% { transform: translate(0, 0) rotate(0deg); }
          25% { transform: translate(100px, 100px) rotate(90deg); }
          50% { transform: translate(200px, 0) rotate(180deg); }
          75% { transform: translate(100px, -100px) rotate(270deg); }
          100% { transform: translate(0, 0) rotate(360deg); }
      }

      /* BLOOD DRIPS */
      .blood-drip {
          position: fixed;
          top: -50px;
          width: 3px;
          height: 50px;
          background: linear-gradient(to bottom, #8a0303, transparent);
          animation: drip 10s infinite;
          z-index: 5;
          opacity: 0.7;
      }

      @keyframes drip {
          0% { transform: translateY(0); opacity: 0; }
          10% { opacity: 0.7; }
          90% { opacity: 0.7; }
          100% { transform: translateY(100vh); opacity: 0; }
      }
    </style>
  </head>
  <body>
    <!-- THREE.JS CONTAINER -->
    <div id="three-container"></div>

    <!-- DECORATIVE BORDERS -->
    <div class="gothic-border border-top"></div>
    <div class="gothic-border border-bottom"></div>
    <div class="gothic-border border-left"></div>
    <div class="gothic-border border-right"></div>

    <!-- ATMOSPHERIC ELEMENTS -->
    <div class="candle"></div>

    <!-- NAVIGATION -->
    <div class="nav-bar">
      <a href="index.html" class="home-btn">Abandon Hope</a>
    </div>

    <!-- HERO SECTION WITH ORIGINAL IMAGE -->
    <section class="hero-section">
      <img
        src="https://www.shutterstock.com/image-illustration/silhouettes-bare-branches-trees-on-600nw-2594069261.jpg"
        alt="Dark tree silhouette"
        class="hero-image"
      />
      <div class="hero-overlay">
        <h1 class="hero-title">NOT DONE YET</h1>
        <p class="hero-subtitle">some stories refuse to end...</p>
      </div>
    </section>

    <!-- TAPES SECTION -->
    <section class="tapes-section">
      <h2 class="tapes-title">THE FOUR TAPES</h2>
      <div class="tapes-grid">
        <div class="tape" data-video="tape1.mp4"><h3>Tape One</h3></div>
        <div class="tape" data-video="tape2.mp4"><h3>Tape Two</h3></div>
        <div class="tape" data-video="tape3.mp4"><h3>Tape Three</h3></div>
        <div class="tape" data-video="tape4.mp4"><h3>Tape Four</h3></div>
      </div>
    </section>

    <!-- STORY SECTION -->
    <div class="story">
      <p>
        There are moments when the night feels heavier than it should — when the
        sound of the wind carries voices that never learned how to rest.
      </p>
      <p>
        Every step through the dark feels like a memory you weren't supposed to
        keep. Faces fade, names dissolve, but the feeling stays — cold, quiet,
        unyielding.
      </p>
      <p>
        The tapes tell stories. Not of heroes, not of endings, but of echoes —
        fragments of people who couldn't find the light, who left behind their
        words so someone might understand.
      </p>
      <p>
        If you listen close enough, maybe you'll hear them too. Maybe you'll
        realize you were never really alone.
      </p>
      <p>
        The music fades, but the silence it leaves behind... is even louder.
      </p>
    </div>

    <!-- VIDEO POPUP -->
    <div class="popup" id="popup">
      <video id="popupVideo" controls></video>
    </div>

    <!-- AUDIO -->
    <audio id="bgMusic" loop>
      <source src="sounds/sad.mp3" type="audio/mpeg" />
      Your browser does not support the audio tag.
    </audio>

    <!-- AUDIO CONTROLS -->
    <div class="audio-controls">
      <button id="muteBtn">Silence</button>
      <input
        id="volumeSlider"
        type="range"
        min="0"
        max="1"
        step="0.01"
        value="0.3"
      />
    </div>

    <script>
      // THREE.JS SCENE SETUP
      let scene, camera, renderer, controls;
      let ghosts = [];
      let particles = [];

      function initThreeJS() {
        // Create scene
        scene = new THREE.Scene();
        scene.fog = new THREE.Fog(0x000000, 10, 50);

        // Create camera
        camera = new THREE.PerspectiveCamera(
          75,
          window.innerWidth / window.innerHeight,
          0.1,
          1000
        );
        camera.position.z = 15;
        camera.position.y = 5;

        // Create renderer
        renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setClearColor(0x000000, 1);
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;

        const container = document.getElementById("three-container");
        container.appendChild(renderer.domElement);

        // Add orbit controls
        controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        controls.rotateSpeed = 0.5;
        controls.enableZoom = false;
        controls.enablePan = false;
        controls.minPolarAngle = Math.PI / 3;
        controls.maxPolarAngle = Math.PI / 2;

        // Add lighting
        const ambientLight = new THREE.AmbientLight(0x330000, 0.3);
        scene.add(ambientLight);

        const directionalLight = new THREE.DirectionalLight(0x8a0303, 0.5);
        directionalLight.position.set(5, 10, 7);
        directionalLight.castShadow = true;
        directionalLight.shadow.mapSize.width = 1024;
        directionalLight.shadow.mapSize.height = 1024;
        scene.add(directionalLight);

        const pointLight = new THREE.PointLight(0x8a0303, 0.5, 100);
        pointLight.position.set(0, 10, 0);
        pointLight.castShadow = true;
        scene.add(pointLight);

        // Create a spooky environment
        createEnvironment();

        // Handle window resize
        window.addEventListener("resize", onWindowResize, false);

        // Start animation loop
        animate();
      }

      function createEnvironment() {
        // Create ground
        const groundGeometry = new THREE.PlaneGeometry(100, 100, 10, 10);
        const groundMaterial = new THREE.MeshStandardMaterial({
          color: 0x0a0a0a,
          roughness: 0.8,
          metalness: 0.2,
        });
        const ground = new THREE.Mesh(groundGeometry, groundMaterial);
        ground.rotation.x = -Math.PI / 2;
        ground.receiveShadow = true;
        scene.add(ground);

        // Create tombstones
        const tombstoneGeometry = new THREE.BoxGeometry(1, 2, 0.5);
        const tombstoneMaterial = new THREE.MeshStandardMaterial({
          color: 0x222222,
          roughness: 0.9,
        });

        for (let i = 0; i < 20; i++) {
          const tombstone = new THREE.Mesh(
            tombstoneGeometry,
            tombstoneMaterial
          );
          tombstone.position.x = (Math.random() - 0.5) * 40;
          tombstone.position.z = (Math.random() - 0.5) * 40;
          tombstone.position.y = 1;
          tombstone.rotation.y = Math.random() * Math.PI;
          tombstone.castShadow = true;
          scene.add(tombstone);
        }

        // Create floating spirits/ghosts
        const ghostGeometry = new THREE.SphereGeometry(0.5, 8, 8);
        const ghostMaterial = new THREE.MeshBasicMaterial({
          color: 0x8a0303,
          transparent: true,
          opacity: 0.3,
        });

        for (let i = 0; i < 5; i++) {
          const ghost = new THREE.Mesh(ghostGeometry, ghostMaterial);
          ghost.position.x = (Math.random() - 0.5) * 30;
          ghost.position.y = Math.random() * 10 + 2;
          ghost.position.z = (Math.random() - 0.5) * 30;
          ghost.userData = {
            speed: Math.random() * 0.02 + 0.01,
            amplitude: Math.random() * 2 + 1,
          };
          ghosts.push(ghost);
          scene.add(ghost);
        }

        // Create floating particles (like ash or dust)
        const particleGeometry = new THREE.BufferGeometry();
        const particleCount = 1000;
        const posArray = new Float32Array(particleCount * 3);

        for (let i = 0; i < particleCount * 3; i++) {
          posArray[i] = (Math.random() - 0.5) * 100;
        }

        particleGeometry.setAttribute(
          "position",
          new THREE.BufferAttribute(posArray, 3)
        );

        const particleMaterial = new THREE.PointsMaterial({
          size: 0.1,
          color: 0x8a0303,
          transparent: true,
          opacity: 0.5,
        });

        const particlesMesh = new THREE.Points(
          particleGeometry,
          particleMaterial
        );
        scene.add(particlesMesh);
        particles.push(particlesMesh);
      }

      function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      }

      function animate() {
        requestAnimationFrame(animate);

        // Animate ghosts
        const time = Date.now() * 0.001;

        ghosts.forEach((ghost, index) => {
          ghost.position.y += Math.sin(time * ghost.userData.speed * 10) * 0.02;
          ghost.position.x += Math.cos(time * ghost.userData.speed * 5) * 0.01;
          ghost.position.z += Math.sin(time * ghost.userData.speed * 7) * 0.01;

          ghost.material.opacity =
            0.2 + Math.sin(time * ghost.userData.speed * 3) * 0.1;
        });

        // Animate particles
        particles.forEach((particle) => {
          particle.rotation.y = time * 0.01;
        });

        controls.update();
        renderer.render(scene, camera);
      }

      // CREATE FLOATING SPIRITS AND BLOOD DRIPS
      function createAtmosphericElements() {
        // Create floating spirits
        for (let i = 0; i < 3; i++) {
          const spirit = document.createElement("div");
          spirit.classList.add("spirit");
          spirit.style.left = Math.random() * 100 + "vw";
          spirit.style.animationDelay = Math.random() * 15 + "s";
          document.body.appendChild(spirit);
        }

        // Create blood drips
        setInterval(() => {
          const drip = document.createElement("div");
          drip.classList.add("blood-drip");
          drip.style.left = Math.random() * 100 + "vw";
          drip.style.animationDuration = Math.random() * 5 + 5 + "s";
          document.body.appendChild(drip);

          // Remove drip after animation completes
          setTimeout(() => {
            if (drip.parentNode) {
              document.body.removeChild(drip);
            }
          }, 15000);
        }, 1000);
      }

      // INITIALIZE EVERYTHING WHEN DOCUMENT LOADS
      document.addEventListener("DOMContentLoaded", function () {
        initThreeJS();
        createAtmosphericElements();

        // Auto-play music on first interaction
        document.addEventListener("click", function initAudio() {
          const music = document.getElementById("bgMusic");
          if (music.paused) {
            music.volume = 0.3;
            music.play().catch((err) => console.log("Playback blocked:", err));
          }
          document.removeEventListener("click", initAudio);
        });
      });

      // AUDIO CONTROLS
      const music = document.getElementById("bgMusic");
      const volumeSlider = document.getElementById("volumeSlider");
      const muteBtn = document.getElementById("muteBtn");

      volumeSlider.addEventListener("input", () => {
        music.volume = volumeSlider.value;
      });

      muteBtn.addEventListener("click", () => {
        music.muted = !music.muted;
        muteBtn.textContent = music.muted ? "Unmute" : "Silence";
      });

      // VIDEO POPUP FUNCTIONALITY
      const tapes = document.querySelectorAll(".tape");
      const popup = document.getElementById("popup");
      const popupVideo = document.getElementById("popupVideo");

      tapes.forEach((tape) => {
        tape.addEventListener("click", () => {
          const videoSrc = tape.getAttribute("data-video");
          popupVideo.src = videoSrc;
          popup.classList.add("active");
          popupVideo.play();
        });
      });

      popup.addEventListener("click", (e) => {
        if (e.target === popup) {
          popup.classList.remove("active");
          popupVideo.pause();
        }
      });
    </script>
  </body>
</html>
